(this["webpackJsonpstarter-movie-front-end"]=this["webpackJsonpstarter-movie-front-end"]||[]).push([[0],{37:function(e,t,r){},38:function(e,t,r){"use strict";r.r(t);var n=r(1),c=r.n(n),s=r(16),a=r.n(s),i=r(6),o=r(0);var l=function(){return Object(o.jsxs)("ul",{className:"nav justify-content-start",style:{padding:"1rem 0 3rem"},children:[Object(o.jsx)("li",{className:"nav-item d-none d-lg-block d-xl-block",children:Object(o.jsx)(i.b,{className:"font-poppins-heading nav-link mx-2 text-light",to:"/",children:Object(o.jsx)("h1",{className:"h5",style:{fontStyle:"italic"},children:"WeLoveMovies"})})}),Object(o.jsx)("li",{className:"nav-item",children:Object(o.jsx)(i.b,{className:"nav-link mx-2 font-weight-light text-light",to:"/movies",children:"All Movies"})}),Object(o.jsx)("li",{className:"nav-item",children:Object(o.jsx)(i.b,{className:"nav-link mx-2 font-weight-light text-light",to:"/theaters",children:"All Theaters"})})]})},j=r.p+"static/media/header.c47d8fe5.jpg";var u=function(){var e={background:"linear-gradient(rgba(0, 0, 0, 0.2), rgba(0, 0, 0, 0.7)), url(".concat(j,")"),backgroundPosition:"center",backgroundSize:"100% auto"};return Object(o.jsxs)("div",{className:"jumbotron jumbotron-fluid text-white border-bottom border-dark pt-0",style:e,children:[Object(o.jsx)(l,{}),Object(o.jsxs)("div",{className:"container",children:[Object(o.jsx)("h1",{className:"display-4",children:"Find your next favorite movie!"}),Object(o.jsxs)("p",{className:"lead",children:[Object(o.jsx)("em",{children:"WeLoveMovies"})," is your source for finding reviews of movies in theatres near you."]})]})]})},d=r(8);var b=function(e){var t=e.error;return t&&Object(o.jsxs)("div",{className:"alert alert-danger m-2",children:["Error: ",t.message]})},h=r(4),m=r(10),O=Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_API_URL:"http://localhost:5001"}).REACT_APP_API_BASE_URL||"http://localhost:5001",v=new Headers;function x(e,t,r){return p.apply(this,arguments)}function p(){return(p=Object(m.a)(Object(h.a)().mark((function e(t,r,n){var c,s;return Object(h.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(t,r);case 3:if(204!==(c=e.sent).status){e.next=6;break}return e.abrupt("return",null);case 6:return e.next=8,c.json();case 8:if(!(s=e.sent).error){e.next=11;break}return e.abrupt("return",Promise.reject({message:s.error}));case 11:return e.abrupt("return",s.data);case 14:if(e.prev=14,e.t0=e.catch(0),"AbortError"===e.t0.name){e.next=19;break}throw console.error(e.t0.stack),e.t0;case 19:return e.abrupt("return",Promise.resolve(n));case 20:case"end":return e.stop()}}),e,null,[[0,14]])})))).apply(this,arguments)}function f(e){return function(){var t=Object(m.a)(Object(h.a)().mark((function t(r){var n;return Object(h.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n="".concat(O,"/movies/").concat(r.movie_id,"/reviews"),t.next=3,x(n,{headers:v,signal:e},[]);case 3:return r.reviews=t.sent,t.abrupt("return",r);case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}function w(e){return function(){var t=Object(m.a)(Object(h.a)().mark((function t(r){var n;return Object(h.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n="".concat(O,"/movies/").concat(r.movie_id,"/theaters"),t.next=3,x(n,{headers:v,signal:e},[]);case 3:return r.theaters=t.sent,t.abrupt("return",r);case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}function g(e){return N.apply(this,arguments)}function N(){return(N=Object(m.a)(Object(h.a)().mark((function e(t){var r,n;return Object(h.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=new URL("".concat(O,"/movies?is_showing=true")),n=f(t),e.next=4,x(r,{headers:v,signal:t},[]).then((function(e){return Promise.all(e.map(n))}));case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function _(){return(_=Object(m.a)(Object(h.a)().mark((function e(t){var r;return Object(h.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=new URL("".concat(O,"/theaters")),e.next=3,x(r,{headers:v,signal:t},[]);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function y(){return(y=Object(m.a)(Object(h.a)().mark((function e(t,r){var n,c,s;return Object(h.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=new URL("".concat(O,"/movies/").concat(t)),c=f(r),s=w(r),e.next=5,x(n,{headers:v,signal:r},[]).then(c).then(s);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function k(){return(k=Object(m.a)(Object(h.a)().mark((function e(t){var r;return Object(h.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r="".concat(O,"/reviews/").concat(t),e.next=3,x(r,{method:"DELETE",headers:v},{});case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function S(){return(S=Object(m.a)(Object(h.a)().mark((function e(t,r){var n,c;return Object(h.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="".concat(O,"/reviews/").concat(t),c={method:"PUT",headers:v,body:JSON.stringify({data:r})},e.next=4,x(n,c,{});case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}v.append("Content-Type","application/json");var R=function(){var e=Object(n.useState)([]),t=Object(d.a)(e,2),r=t[0],c=t[1],s=Object(n.useState)(null),a=Object(d.a)(s,2),l=a[0],j=a[1];Object(n.useEffect)((function(){j(null);var e=new AbortController;return g(e.signal).then(c).catch(j),function(){return e.abort()}}),[]);var u=r.map((function(e){return Object(o.jsxs)("article",{className:"col-sm-12 col-md-6 col-lg-3 my-2",children:[Object(o.jsx)("img",{alt:"".concat(e.title," Poster"),className:"rounded",src:e.image_url,style:{width:"100%"}}),Object(o.jsx)(i.b,{to:"/movies/".concat(e.movie_id),className:"stretched-link text-dark",children:Object(o.jsx)("h3",{className:"font-poppins-heading text-center mt-2",children:e.title})})]},e.movie_id)}));return Object(o.jsxs)("main",{className:"container",children:[Object(o.jsx)(b,{error:l}),Object(o.jsx)("h2",{className:"font-poppins",children:"Now Showing"}),Object(o.jsx)("hr",{}),Object(o.jsx)("section",{className:"row",children:u})]})};function A(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if(e.length){var t=e.reduce((function(e,t){return e+t.score}),0);return Math.round(t/e.length)}return"N/A"}var E=function(e){var t=e.reviews,r=void 0===t?[]:t;return Object(o.jsxs)("p",{children:[Object(o.jsx)("strong",{children:"Average Review Rating:"})," ",A(r)]})};var P=function(e){var t=e.movie;return Object(o.jsxs)("section",{className:"row mt-4",children:[Object(o.jsx)("article",{className:"col-sm-12 col-md-6 col-lg-3",children:Object(o.jsx)("img",{alt:"".concat(t.title," Poster"),className:"rounded",src:t.image_url,style:{width:"100%"}})}),Object(o.jsxs)("aside",{className:"col-sm-12 col-md-6 col-lg-9",children:[Object(o.jsx)("h3",{className:"font-poppins-heading mb-4",children:t.title}),Object(o.jsx)("p",{children:t.description}),Object(o.jsxs)("p",{children:[Object(o.jsx)("strong",{children:"Runtime:"})," ",t.runtime," minutes"]}),Object(o.jsxs)("p",{children:[Object(o.jsx)("strong",{children:"Rating:"})," ",t.rating]}),Object(o.jsx)(E,{reviews:t.reviews}),Object(o.jsx)(i.b,{to:"/movies/".concat(t.movie_id),className:"btn btn-primary",children:"See More"})]})]})};var T=function(){var e=Object(n.useState)([]),t=Object(d.a)(e,2),r=t[0],c=t[1],s=Object(n.useState)(null),a=Object(d.a)(s,2),i=a[0],l=a[1];Object(n.useEffect)((function(){l(null);var e=new AbortController;return g(e.signal).then(c).catch(l),function(){return e.abort()}}),[]);var j=r.map((function(e){return Object(o.jsx)(P,{movie:e},e.movie_id)}));return Object(o.jsxs)("main",{className:"container",children:[Object(o.jsx)(b,{error:i}),Object(o.jsx)("h2",{className:"font-poppins",children:"All Movies"}),Object(o.jsx)("hr",{}),Object(o.jsx)("section",{children:j})]})},C=r(2);var L=function(e){var t=e.movie;return Object(o.jsxs)("section",{children:[Object(o.jsx)("h3",{className:"font-poppins-heading mb-4",children:t.title}),Object(o.jsx)("p",{children:t.description}),Object(o.jsxs)("p",{children:[Object(o.jsx)("strong",{children:"Runtime:"})," ",t.runtime_in_minutes," minutes"]}),Object(o.jsxs)("p",{children:[Object(o.jsx)("strong",{children:"Rating:"})," ",t.rating]}),Object(o.jsx)(E,{reviews:t.reviews})]})},M=r(18),U={padding:"0 0px 5px 5px"};var H=function(e){var t=e.review,r=e.deleteReview,n=e.setReviewScore,c=t.critic;return Object(o.jsxs)("section",{className:"border p-4 mb-4",children:[Object(o.jsxs)("h4",{children:[c.preferred_name," ",c.surname,Object(o.jsxs)("small",{children:[" of ",c.organization_name]})]}),Object(o.jsx)("p",{dangerouslySetInnerHTML:{__html:M.markdown.toHTML(t.content)}}),Object(o.jsxs)("p",{children:[Object(o.jsx)("strong",{children:"Rating:"})," ",t.score,Object(o.jsx)("button",{className:"btn btn-link",style:U,onClick:function(){return function(){var e=t.score+1;e>5||n(t,e)}()},children:"\u2191"}),Object(o.jsx)("button",{className:"btn btn-link",style:U,onClick:function(){return function(){var e=t.score-1;e<1||n(t,e)}()},children:"\u2193"})]}),Object(o.jsx)("button",{className:"btn btn-danger",onClick:function(){return r(t)},children:"Destroy Review"})]})};var I=function(e){var t=e.reviews,r=void 0===t?[]:t,n=e.deleteReview,c=e.setReviewScore;if(r.length){var s=r.sort((function(e,t){return e.critic.preferred_name.localeCompare(t.critic.preferred_name)})).map((function(e){return Object(o.jsx)(H,{review:e,deleteReview:n,setReviewScore:c},e.review_id)}));return Object(o.jsxs)("section",{className:"mt-4",children:[Object(o.jsx)("h3",{children:"Reviews"}),s]})}return null};var D=function(e){var t=e.theater;return Object(o.jsx)("article",{className:"col-sm-12 col-md",children:Object(o.jsx)("div",{className:"card",children:Object(o.jsxs)("div",{className:"card-body",children:[Object(o.jsx)("h5",{children:t.name}),Object(o.jsxs)("address",{children:[t.address_line_1,Object(o.jsx)("br",{}),t.address_line_2?t.address_line_2:null,t.city,", ",t.state," ",t.zip]})]})})})};var W=function(e){var t=e.theaters,r=void 0===t?[]:t;return r.length?Object(o.jsxs)("section",{className:"mt-4",children:[Object(o.jsx)("h4",{children:"Now Showing Here"}),Object(o.jsx)("div",{className:"row",children:r.map((function(e){return Object(o.jsx)(D,{theater:e},e.theater_id)}))})]}):null};var z=function(){var e=Object(C.f)().movieId,t=Object(n.useState)({}),r=Object(d.a)(t,2),c=r[0],s=r[1],a=Object(n.useState)(null),i=Object(d.a)(a,2),l=i[0],j=i[1];function u(e){j(null);var t=new AbortController;return function(e,t){return y.apply(this,arguments)}(e,t.signal).then(s).catch(j),function(){return t.abort()}}return Object(n.useEffect)((function(){u(e)}),[e]),Object(o.jsxs)("div",{className:"container",children:[Object(o.jsx)(b,{error:l}),Object(o.jsxs)("section",{className:"row mt-4",children:[Object(o.jsx)("article",{className:"col-sm-12 col-md-6 col-lg-3",children:Object(o.jsx)("img",{alt:"".concat(c.title," Poster"),className:"rounded",src:c.image_url,style:{width:"100%"}})}),Object(o.jsxs)("aside",{className:"col-sm-12 col-md-6 col-lg-9",children:[Object(o.jsx)(L,{movie:c}),Object(o.jsx)(W,{theaters:c.theaters}),Object(o.jsx)(I,{reviews:c.reviews,deleteReview:function(e){var t=e.movie_id;(function(e){return k.apply(this,arguments)})(e.review_id).then((function(){return u(t)}))},setReviewScore:function(e,t){var r=e.movie_id,n=e.review_id;console.log("score",n,t),function(e,t){return S.apply(this,arguments)}(n,{score:t}).then((function(){return u(r)}))}})]})]})]})};var B=function(e){var t=e.theater;return Object(o.jsx)("article",{className:"col-12 mb-4",children:Object(o.jsxs)("div",{className:"row",children:[Object(o.jsxs)("aside",{className:"col",children:[Object(o.jsx)("h2",{children:t.name}),Object(o.jsxs)("address",{children:[t.address_line_1,Object(o.jsx)("br",{}),t.address_line_2?t.address_line_2:null,t.city,", ",t.state," ",t.zip]})]}),Object(o.jsx)("section",{className:"col",children:Object(o.jsx)("div",{className:"row",children:t.movies.map((function(e){return Object(o.jsx)("div",{className:"col-2",children:Object(o.jsx)(i.b,{to:"/movies/".concat(e.movie_id),children:Object(o.jsx)("img",{alt:"".concat(e.title," Poster"),src:e.image_url,className:"w-100"})})},e.movie_id)}))})})]})})};var F=function(){var e=Object(n.useState)([]),t=Object(d.a)(e,2),r=t[0],c=t[1],s=Object(n.useState)(null),a=Object(d.a)(s,2),i=a[0],l=a[1];Object(n.useEffect)((function(){l(null);var e=new AbortController;return function(e){return _.apply(this,arguments)}(e.signal).then(c).catch(l),function(){return e.abort()}}),[]);var j=r.map((function(e){return Object(o.jsx)(B,{theater:e},e.theater_id)}));return Object(o.jsxs)("main",{className:"container",children:[Object(o.jsx)(b,{error:i}),Object(o.jsx)("h2",{className:"font-poppins",children:"All Theaters"}),Object(o.jsx)("hr",{}),Object(o.jsx)("section",{className:"row",children:j})]})};var J=function(){return Object(o.jsxs)(i.a,{children:[Object(o.jsx)(u,{}),Object(o.jsxs)(C.c,{children:[Object(o.jsx)(C.a,{exact:!0,path:"/",children:Object(o.jsx)(R,{})}),Object(o.jsx)(C.a,{exact:!0,path:"/movies",children:Object(o.jsx)(T,{})}),Object(o.jsx)(C.a,{exact:!0,path:"/movies/:movieId",children:Object(o.jsx)(z,{})}),Object(o.jsx)(C.a,{exact:!0,path:"/theaters",children:Object(o.jsx)(F,{})})]})]})};r(37);a.a.render(Object(o.jsx)(c.a.StrictMode,{children:Object(o.jsx)(J,{})}),document.getElementById("root"))}},[[38,1,2]]]);
//# sourceMappingURL=main.b5a74d13.chunk.js.map